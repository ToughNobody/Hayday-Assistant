# 卡通农场小助手更新日志
## v2.2.1

### 功能优化
- 当耕地已种植作物时，会检测剩余时间。将剩余时间作为计时器时间。
- 当小鸭沙龙或龙虾池满了，并且还有未收集的捕鸭器或捕虾笼时，会自动切换到下一个鱼塘
- 单刷账号在执行完一轮后会自动复位到商店
- 添加第一次雇佣汤姆界面的判断
- 添加第一次雇佣汤姆的选择(首次雇佣汤姆界面是否选择确定),默认不选择
- 优化渔船点击位置
- 在脚本主页同样加入鱼塘配置

### Bug修复
- 修复accountList内容不完整的bug
- 修复进入鱼塘的检测Bug
- 修复单刷和存档刷地时的Bug
- 修复当单刷并且不是仅汤姆时的“selectedFunction”未定义错误

---

## v2.2.0
### 新增功能
- 新增鱼塘功能，每个账号的鱼塘功能可单独配置(只支持撒网，不支持鱼饵钓鱼)
- 添加推送测试按钮，用于测试推送功能是否正常
- 添加单独的仓库统计功能，仅执行仓库统计并推送统计结果。即使没有设置推送，也会执行统计并将结果输出到日志中。
- 添加手势模式选择功能

### 功能优化
- 每个账号的汤姆功能可单独配置
- 将token信息同样存储到configs中，保存配置时会将token信息保存到配置文件中，点击加载token信息也会加载了
- 仅汤姆情况下，跑完汤姆不会滑动回去，直接退回主界面
- 换号时的界面检测不会检测左下角的home按钮


### Bug修复
- 修复脚本在运行时,脚本主界面的输入框会被setText设置的问题

---

## v2.1.16
### Bug修复
- 修复OCR识别账号的日志输出错误
- 收割手势使用try包裹
- 修复添加好友时，点击搜索后由于加载较慢导致的错误

### 功能优化
- 优化种植时的作物检测
- 添加收割时双指同步选项，启用后双指收割运动时上下两指会同步移动
- 将颜色数据与module.js分离。添加部分物品的颜色库，用于找色时的物品识别。具体物品颜色请查看color_lib.js文件
- 物品售卖时，如果颜色库中存在该物品颜色，使用找色寻找该物品，找不到时视为0个。颜色库中没有默认检测第一个物品
- 汤姆寻找时，如果搜索后只有一个物品，点击第一个物品。如果有多个物品，颜色库中有该物品，先使用找色寻找该物品，找不到时使用文字识别右侧文字，判断是否匹配。都不匹配时点击第一个物品
- UI界面的开关按钮点击部位优化
- 优化搜索物品的判定
- 优化初始时的滑动手势，避免点到其他机器等物品
- 添加金币收取方式选项，默认一键收取，可切换为逐个点击

---

## v2.1.15
### Bug修复
- 修复纵向收割偏移参数设置问题
- 修复创新号功能由于游戏更新导致的运行错误

### 功能优化
- 双指间距添加x轴参数，用于调整双指横向间距
- 提升售卖速度

### 新增功能
- 将倒金币添加至UI，具体功能已实现

---

## v2.1.14
### Bug修复
- 修复仓库售卖时，仓库容量为四位数时的识别错误
- 修复收割时，镰刀位置点击错误的问题
- 修复仓库统计的变量未定义错误

### 新增功能
- 添加忽略此版本选项
- 添加公告栏

### 功能优化
- 优化关闭脚本功能
- token输入后会自动删除两边的空白符

---

## v2.1.13
### Bug修复
- 修复种地时点击土地后找不到商店的报错
- 修复更新后汤姆功能出错问题

---

## v2.1.12
### 功能优化
- 商店界面判断重新取点,在售卖前加了一个界面判断
- 将仓库统计的仓库容量识别方法替换至最新识别方法
- 如果第一块耕地已种植，不再继续执行耕种和检测种植状态
- 如果商店位置太靠近屏幕边缘，会先移动屏幕调整位置

### Bug修复
- 修复商店的第二排第一个货架识别不到的Bug

---

## v2.1.11
### Bug修复
- 修复日志监听只监听main.js的Bug(之前怎么没发现)

### 新增
- 添加coin.js,没写入主脚本,想用可以自己改一下具体点击坐标和切换账号。

---

## v2.1.10
### Bug修复
- 修复当勾选"等待货架"时,刷地也会等待货架的Bug
- 修复斧头数量识别时,数量到达三位数,识别错误的Bug(把字符分割方法从只使用垂直投影分割，改为先使用垂直投影分割，再将宽度超过25像素的图片使用连通域分析进行分割，确保其他白色像素不会影响字符分割。ps:这个过程真的太有意思了)
- 修复螺钉识别错误的Bug
- 修复更新后重启，显示依旧是旧版的Bug

### 新增功能
- 添加重启游戏仅返回桌面按钮,开启后当需要重启游戏时,返回桌面,等待15秒再打开游戏,防止在关闭游戏时出现错误.如果你的重启有Bug,推荐开启

### 功能调整
- 更新方式只保留下载压缩包方式

---

## v2.1.9
### 新增功能
- 为物品售卖添加等待货架,当售卖时没有剩余空闲货架,且还没有全部售卖完成,会反复检查货架,等待卖出,再进行上架

### 功能优化
- 物品售卖界面添加右上角设置按钮,可以设置售卖方式,如售卖全部,售卖全部锯斧,售卖全部炸矿,售卖全部货仓,售卖全部粮仓,售卖全部扩地,售卖平均货仓,售卖平均粮仓,售卖平均扩地,导入,勾选全部账号,清空选择,恢复默认
- 货架右滑速度降低

---

## v2.1.8
### 功能优化
- 优化建材的识别和数量识别

### Bug修复
- 修复保存配置失败Bug
- 修复三位数物品识别错误Bug

---

## v2.1.7
### 新增功能
- 添加物品售卖功能

### 功能优化
- 稍微缩短了种植和收割前的等待时间
- 售卖时如果该物品不在这一页，则使用搜索，不再向下滑动寻找
- 图片压缩体积,占用空间更小
- 收割和种植时悬浮文字将显示当前操作步骤，不是检测商店了
- 界面检测添加好友栏打开的界面判断

### Bug修复
- 检测主界面时的叉号重复点击

---

## v2.1.6
### 新增功能
- 右上角添加控制台按钮，能直接打开控制台查看近期日志输出
- 将汤姆功能单独拿出来，可以仅跑汤姆

### 功能优化
- 将重启游戏的shell命令从force-stop改为kill，使用关闭进程而非强行停止
- 点击开始后更快的启动
- 使用文字识别进行切换账号，如果未找到账号会输出OCR识别结果
- 优化日志输出，且清空日志不会影响日志文件的写入
- 汤姆的识别点击添加了使用汤姆的小木盒定位

### Bug修复
- 修复在汤姆功能已经选择物品后，汤姆第一次回来，在选择物品数量界面执行汤姆导致的运行Bug

---

## v2.1.5
### 新增功能
- 添加顶号延迟，当其他设备登录脚本执行的账号时，会等待5分钟(时间可自行设置)
- 如遇到服务器下线，会等待15分钟

### 功能优化
- UI界面优化
- 添加supercell账号界面的检测

### Bug修复
- 修复商店售卖时，当货架全满，不会上报纸的Bug

---

## v2.1.4
### Bug修复
- 又改了一下重启功能

### 功能优化
- UI界面小改，添加了部分说明(蓝色问号)

---

## v2.1.3
### Bug修复
- 进入设计节界面的空指针错误
- 修复设备root但未授予Autoxjs root权限时,使用shell命令关闭游戏导致的重启游戏失效

### 功能优化
- 添加重启游戏方式选项，重启游戏失效的设备取消勾选使用shell重启游戏
- 脚本运行时关闭脚本有时脚本会继续运行，现在使用脚本（不是Autoxjs）的悬浮窗，点击叉号，一次就能关闭了。脚本主界面的停止运行同理

---

## v2.1.2
### 功能优化
- 让售卖计划显示时间稍长一点
- 加快换号时按钮点击速度
- 添加切换按钮点击坐标，当切换账号识别失效时，可手动添加按钮坐标
- 升仓分为升粮仓和升货仓，可单独选择
- 大幅提升收金币速度

### Bug修复
- 修复仓库售卖项目未勾选也售卖该物品的Bug
- 修复仓库售卖触发阈值无法设置为0的Bug
- 修复作物成熟时间在每次加载时都恢复默认的Bug

---

## v2.1.1
### Bug修复
- 修复汤姆功能Account未定义Bug
- 修复售卖时售卖数量检测出错的Bug

### 功能优化
- 读取模板图片时会在日志输出图片路径，模板图片读取出错会直接弹出toast提醒。
- 仓库售卖弹窗点击确定加入"保存成功"提醒
- 上报前会检测界面，如果在售卖界面则会点击叉号退出再上报

---

## v2.1.0
### 新增功能
- 增加仓库售卖功能

### 功能优化
- 几乎重写了售卖功能，大幅提升了商店售卖的速度，并且能"精准的"控制剩余作物数量等于预设保留量
- 获取截图权限后多加了一秒等待时间。
- 小改了一下重启函数，删除home()
- 汤姆功能只有在开启才会加载

---

## v2.0.6
### Bug修复
- 修复截图权限点击的坐标出错Bug
- 修复脚本主界面的截图权限开关有时失灵的问题
- 修复商店收取金币有时会进格雷格农场Bug
- 修复新版本创新号相关Bug

---

## v2.0.5
### 功能优化
- 将账号图片文件夹调整至"/storage/emulated/0/Android/data/org.autojs.autoxjs.v7/files/accountImgs"，需手动迁移图片

### 新增功能
- 添加仓库售卖UI，实际功能待实装

### Bug修复
- 修复切换账号时的按钮点击错误

---

## v2.0.4
### 功能优化
- 又重写了保存逻辑，更新前先点保存配置，更新后点击加载配置就可以了
- 减少脚本启动时的资源消耗，启动更快
- 优化主题颜色（也不知道为什么就喜欢在无关紧要的地方下功夫( •̀ ω •́ )✧ ）
- 汤姆功能开启时，添加了有关汤姆状态的日志输出

### Bug修复
- 修复未root设备重启游戏时未能正确打开设置页面导致进入死循环
- 添加当未雇佣汤姆时，点击汤姆后出现打折画面的页面检测

---

## v2.0.3
### Bug修复
- 修复商店点击叉号失效Bug
- 修复商店收取金币有时会进格雷格农场Bug

---

## v2.0.2
### 功能优化
- 将"下载全部文件"改为"下载压缩包"

### Bug修复
- 修复汤姆选择数量时的点击错误

---

## v2.0.1
### 功能优化
- 下载全部文件改为下载发行版压缩包，下载后自动解压到脚本文件夹(下载后是一个新的脚本文件，不会覆盖原脚本)

### Bug修复
- 修复汤姆休息时的计时器设定错误
- 修复退出商店时识别叉号的模板匹配失败的Bug

---

## v2.0.0
### 新增功能
- 加入通过shizuku修改分辨率的功能。对于其他分辨率的设备，可将分辨率修改至720*1280
- 由于有些账号作物成熟时间不同，加入自定义成熟时间，可自行设置
- 刷地作物加入甘蔗

### 功能优化
- 大幅优化切换账号时文字识别的时间
- 优化商店金币收取的识别
- 售卖时的数量识别优化，加入作物剩余数量参数
- 优化截图权限点击操作，在主界面添加截图权限获取按钮

### Bug修复
- 点击加载配置账号列表不能正常更新
- 修复检测耕地种植情况时的检测失效问题
- 修复汤姆执行Bug
- 修复邮箱切换账号，当不在账号切换页面时，未找到账号后滑动至页面顶部导致的死循环问题。
- 修复主界面检测时，计数出错问题
- 修复点击开始时后返回主界面反复横跳的问题

---

## v1.5.1
### Bug修复
- 修复Bug：启用汤姆后不执行

---

## v1.5.0
### 新增功能
- 汤姆功能（还没有具体测试）

### 功能优化
- 将配置保存方式改为写入存储storages，现在的保存配置是将当前配置保存到原来的config.json文件，加载是从config.json文件加载,当删除Autojs后可以点击加载配置即可加载本地配置

### Bug修复
- 点击切换账号时按钮不会因为按钮闪烁导致识别失败（双重验证，应该没问题了吧）

---

## v1.4.20
### 功能优化
- 浮动按钮在每次启动脚本时不会自动退出
- 添加github更新源和下载全部文件，当下载失败或文件缺失，可再次尝试下载

---

## v1.4.19
### 功能优化
- 识别商店时间延长到3秒

### Bug修复
- 修复种植时点击下一页出现死循环的Bug

---

## v1.4.18
### 功能优化
- 添加两种检测设备root的方式，满足其一即判断已root

---

## v1.4.17
### 功能优化
- 截图权限点击优化
- UI界面优化
- 优化稻草人的识别
- 检测进入购买界面判断优化
- 在收割种植完成后加入一次检测

### Bug修复
- 创新号时检测的加载页面，由于游戏界面更新导致的识别错误

---

## v1.4.16
### Bug修复
- 修复新手教程中的主界面检测Bug

---

## v1.4.15
### Bug修复
- 修复切换账号页面识别错误

---

## v1.4.14
### Bug修复
- 修复菜单按钮有红点时的识别问题

---

## v1.4.13
### 功能优化
- 脚本内更新内容能显示完全了

### Bug修复
- 修复设计节点击失效问题

---

## v1.4.12
### 新增功能
- 存档切号功能（需要root）

### 功能优化
- 优化滑动手势
- 账号列表选择框向左微调，防止与添加按钮重合
- 在更多选项里添加设备root信息
- 添加改善游戏界面的识别，自动点击"全部接受"
- 添加进入设计节界面的识别
- 添加升级后出现的评价卡通农场弹窗，自动点击"不再询问"
- 创新号：优化起名操作，添加点击初始进入游戏时的新手动画跳过按键操作

### Bug修复
- 修复账号列表删除账号时的显示错误
- 修复异形屏切换账号时找不到切换账号按钮的bug

---

## v1.4.11
### Bug修复
- 修复创新号由于加载时间过长导致起名出错的bug

---

## v1.4.10
### 新增功能
- 浮动按钮添加截屏选项，点击即可截屏，保存在/storage/emulated/0/$MuMu12Shared/Screenshots

### 功能优化
- 将切换账号页面检测时间由5秒改为8秒
- 检测主界面改为识别右下角好友按钮，不再检测左侧可能发生位移的按钮
- 进入鱼塘，小镇，其他农场的检测已适配新版界面
- 优化更新模块（其实是上次改的，忘写了）

### Bug修复
- 修复初次使用时目录文件可能重建失败的bug
- 浮动按钮终于终于可以用了

---

## v1.4.9
### 功能优化
- 仓库统计不会因为游戏重启而中断
- 对root机型的游戏重启进行优化

### Bug修复
- 修复仓库统计页数无法更改的bug

---

## v1.4.8
### Bug修复
- 修复文字识别时账号切换bug

---

## v1.4.7
### 功能优化
- 为模块导入添加判断

---

## v1.4.6
### 功能优化
- 创新号：延长查找格雷格时间，添加点击格雷格判定

---

## v1.4.5
### 新增功能
- 添加创建新号功能

### Bug修复
- 修复推送时服务器无响应导致的程序崩溃
- 其余已知问题（忘记录了）

---

## v1.4.4
### 功能优化
- 换号点击操作优化

---

## v1.4.3
### Bug修复
- 修复教程点击时进入的死循环

---

## v1.4.2
### 功能优化
- 将悬浮窗显示包裹进try

---

## v1.4.1
### 新增功能
- 添加仓库检测页数
- 刷完一轮后会显示升级仓库和仓库统计剩余时间

### 功能优化
- 在开启切换账号功能时，因未检测到相应画面内容导致的游戏重启，可以从打断的账号开始刷
- 优化计时器计时方式，不会因为游戏重启而中断
- 优化教程点击
- 优化当前操作显示悬浮窗

### Bug修复
- 修复种植时点击下一页时识别错误

---

## v1.4.0
### 新增功能
- 仓库统计功能
- 目前支持pushplus推送加，server酱，wxpusher

### Bug修复
- 修复检测切换账号页面Bug
- 修复升仓时机Bug
- 修复在账号信息UI界面删除时账号的账号显示错误
- 修复在切换账号的模式下计时器失效问题

### 功能优化
- 加快收金币速度

---

## v1.3.5
### 功能优化
- Mumu也能用文字识别账号了
- 主界面改动，将账号信息单列一栏

---

## v1.3.4
### 功能优化
- 优化叉号识别
- 优化金币收取

---

## v1.3.3
### Bug修复
- 修复OCR识别问题

---

## v1.3.2
### 功能优化
- 优化作物种植和收割

---

## v1.3.1
### 新增功能
- 添加文字识别账号功能，mumu模拟器不能用

### 功能优化
- 优化账号添加操作

---

## v1.3.0
### 新增功能
- 添加种树功能

### 功能优化
- 优化切换账号逻辑

---

## v1.2.13
### 功能优化
- 刷地手势重写，加入手势时间参数
- 收割参数简化，从坐标偏移改为数格子

---

## v1.2.12
### Bug修复
- 修复上架问题
- 发布广告时不会点击已发布广告的物品了

---

## v1.2.11
### Bug修复
- 修复多账号计时器bug

### 功能优化
- 汤姆和格雷格来商店买的东西，也可以收金币了

---

## v1.2.10
### 功能优化
- 老板界面和新版界面都能识别,小镇界面，鱼塘界面识别更新

---

## v1.2.9
### 功能优化
- 适配新界面(真的)

---

## v1.2.8
### 功能优化
- 简单写了一个新手教程点击，其他的还在完善，目前卡在20级的新手教程应该能自己点了

---

## v1.2.7

---

## v1.2.6

---

## v1.2.5
### 功能优化
- 优化更新模块，提高账号图片识别度

---

## v1.2.4
### 功能优化
- 加入启动时自动检测更新，配置信息自动保存

---

## v1.2.3
### 功能优化
- 为粮仓货仓添加了自定义坐标偏移
- 现在使用面包房识别的也能使用自动升仓了，需自行设置偏移值

---

## v1.2.2
### 新增功能
- 添加自动升级仓库功能，可自定义时间间隔

---

## v1.2.1
### Bug修复
- 修了切换账号按钮bug

---

## v1.2.0
### 新增功能
- 新增热更新功能，修复若干bug。
- 现在可以在软件界面右上角关于=>检查更新，进行更新，不需要再从重新下载了

---

## v1.1.0
### 新增功能
- 新增账号切换功能